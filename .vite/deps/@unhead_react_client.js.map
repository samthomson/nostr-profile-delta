{
  "version": 3,
  "sources": ["../../node_modules/@unhead/react/dist/client.mjs", "../../node_modules/unhead/dist/client.mjs"],
  "sourcesContent": ["import { createElement } from 'react';\nimport { createHead as createHead$1, createDebouncedFn, renderDOMHead } from 'unhead/client';\nexport { renderDOMHead } from 'unhead/client';\nimport { U as UnheadContext } from './shared/react.DF9T1fqs.mjs';\n\nfunction createHead(options = {}) {\n  const head = createHead$1({\n    domOptions: {\n      render: createDebouncedFn(() => renderDOMHead(head), (fn) => setTimeout(fn, 0))\n    },\n    ...options\n  });\n  return head;\n}\nfunction UnheadProvider({ children, head }) {\n  return createElement(UnheadContext.Provider, { value: head || createHead() }, children);\n}\n\nexport { UnheadProvider, createHead };\n", "import { a as createUnhead } from './shared/unhead.CXyUfY4l.mjs';\nimport { H as HasElementTags } from './shared/unhead.yem5I2v_.mjs';\nimport { h as hashTag, i as isMetaArrayDupeKey, a as normalizeProps, d as dedupeKey } from './shared/unhead.ytfIU1HR.mjs';\nimport 'hookable';\nimport './shared/unhead.DZbvapt-.mjs';\n\nasync function renderDOMHead(head, options = {}) {\n  const dom = options.document || head.resolvedOptions.document;\n  if (!dom || !head.dirty)\n    return;\n  const beforeRenderCtx = { shouldRender: true, tags: [] };\n  await head.hooks.callHook(\"dom:beforeRender\", beforeRenderCtx);\n  if (!beforeRenderCtx.shouldRender)\n    return;\n  if (head._domUpdatePromise) {\n    return head._domUpdatePromise;\n  }\n  head._domUpdatePromise = new Promise(async (resolve) => {\n    const dupeKeyCounter = /* @__PURE__ */ new Map();\n    const resolveTagPromise = new Promise((resolve2) => {\n      head.resolveTags().then((tags2) => {\n        resolve2(\n          tags2.map((tag) => {\n            const count = dupeKeyCounter.get(tag._d) || 0;\n            const res = {\n              tag,\n              id: (count ? `${tag._d}:${count}` : tag._d) || hashTag(tag),\n              shouldRender: true\n            };\n            if (tag._d && isMetaArrayDupeKey(tag._d)) {\n              dupeKeyCounter.set(tag._d, count + 1);\n            }\n            return res;\n          })\n        );\n      });\n    });\n    let state = head._dom;\n    if (!state) {\n      state = {\n        title: dom.title,\n        elMap: (/* @__PURE__ */ new Map()).set(\"htmlAttrs\", dom.documentElement).set(\"bodyAttrs\", dom.body)\n      };\n      for (const key of [\"body\", \"head\"]) {\n        const children = dom[key]?.children;\n        for (const c of children) {\n          const tag = c.tagName.toLowerCase();\n          if (!HasElementTags.has(tag)) {\n            continue;\n          }\n          const next = normalizeProps({ tag, props: {} }, {\n            innerHTML: c.innerHTML,\n            ...c.getAttributeNames().reduce((props, name) => {\n              props[name] = c.getAttribute(name);\n              return props;\n            }, {}) || {}\n          });\n          next.key = c.getAttribute(\"data-hid\") || void 0;\n          next._d = dedupeKey(next) || hashTag(next);\n          if (state.elMap.has(next._d)) {\n            let count = 1;\n            let k = next._d;\n            while (state.elMap.has(k)) {\n              k = `${next._d}:${count++}`;\n            }\n            state.elMap.set(k, c);\n          } else {\n            state.elMap.set(next._d, c);\n          }\n        }\n      }\n    }\n    state.pendingSideEffects = { ...state.sideEffects };\n    state.sideEffects = {};\n    function track(id, scope, fn) {\n      const k = `${id}:${scope}`;\n      state.sideEffects[k] = fn;\n      delete state.pendingSideEffects[k];\n    }\n    function trackCtx({ id, $el, tag }) {\n      const isAttrTag = tag.tag.endsWith(\"Attrs\");\n      state.elMap.set(id, $el);\n      if (!isAttrTag) {\n        if (tag.textContent && tag.textContent !== $el.textContent) {\n          $el.textContent = tag.textContent;\n        }\n        if (tag.innerHTML && tag.innerHTML !== $el.innerHTML) {\n          $el.innerHTML = tag.innerHTML;\n        }\n        track(id, \"el\", () => {\n          $el?.remove();\n          state.elMap.delete(id);\n        });\n      }\n      for (const k in tag.props) {\n        if (!Object.prototype.hasOwnProperty.call(tag.props, k))\n          continue;\n        const value = tag.props[k];\n        if (k.startsWith(\"on\") && typeof value === \"function\") {\n          const dataset = $el?.dataset;\n          if (dataset && dataset[`${k}fired`]) {\n            const ek = k.slice(0, -5);\n            value.call($el, new Event(ek.substring(2)));\n          }\n          if ($el.getAttribute(`data-${k}`) !== \"\") {\n            (tag.tag === \"bodyAttrs\" ? dom.defaultView : $el).addEventListener(\n              // onload -> load\n              k.substring(2),\n              value.bind($el)\n            );\n            $el.setAttribute(`data-${k}`, \"\");\n          }\n          continue;\n        }\n        const ck = `attr:${k}`;\n        if (k === \"class\") {\n          if (!value) {\n            continue;\n          }\n          for (const c of value) {\n            isAttrTag && track(id, `${ck}:${c}`, () => $el.classList.remove(c));\n            !$el.classList.contains(c) && $el.classList.add(c);\n          }\n        } else if (k === \"style\") {\n          if (!value) {\n            continue;\n          }\n          for (const [k2, v] of value) {\n            track(id, `${ck}:${k2}`, () => {\n              $el.style.removeProperty(k2);\n            });\n            $el.style.setProperty(k2, v);\n          }\n        } else if (value !== false && value !== null) {\n          $el.getAttribute(k) !== value && $el.setAttribute(k, value === true ? \"\" : String(value));\n          isAttrTag && track(id, ck, () => $el.removeAttribute(k));\n        }\n      }\n    }\n    const pending = [];\n    const frag = {\n      bodyClose: void 0,\n      bodyOpen: void 0,\n      head: void 0\n    };\n    const tags = await resolveTagPromise;\n    for (const ctx of tags) {\n      const { tag, shouldRender, id } = ctx;\n      if (!shouldRender)\n        continue;\n      if (tag.tag === \"title\") {\n        dom.title = tag.textContent;\n        track(\"title\", \"\", () => dom.title = state.title);\n        continue;\n      }\n      ctx.$el = ctx.$el || state.elMap.get(id);\n      if (ctx.$el) {\n        trackCtx(ctx);\n      } else if (HasElementTags.has(tag.tag)) {\n        pending.push(ctx);\n      }\n    }\n    for (const ctx of pending) {\n      const pos = ctx.tag.tagPosition || \"head\";\n      ctx.$el = dom.createElement(ctx.tag.tag);\n      trackCtx(ctx);\n      frag[pos] = frag[pos] || dom.createDocumentFragment();\n      frag[pos].appendChild(ctx.$el);\n    }\n    for (const ctx of tags)\n      await head.hooks.callHook(\"dom:renderTag\", ctx, dom, track);\n    frag.head && dom.head.appendChild(frag.head);\n    frag.bodyOpen && dom.body.insertBefore(frag.bodyOpen, dom.body.firstChild);\n    frag.bodyClose && dom.body.appendChild(frag.bodyClose);\n    for (const k in state.pendingSideEffects) {\n      state.pendingSideEffects[k]();\n    }\n    head._dom = state;\n    await head.hooks.callHook(\"dom:rendered\", { renders: tags });\n    resolve();\n  }).finally(() => {\n    head._domUpdatePromise = void 0;\n    head.dirty = false;\n  });\n  return head._domUpdatePromise;\n}\n\nfunction createHead(options = {}) {\n  const render = options.domOptions?.render || renderDOMHead;\n  options.document = options.document || (typeof window !== \"undefined\" ? document : void 0);\n  const initialPayload = options.document?.head.querySelector('script[id=\"unhead:payload\"]')?.innerHTML || false;\n  return createUnhead({\n    ...options,\n    plugins: [\n      ...options.plugins || [],\n      {\n        key: \"client\",\n        hooks: {\n          \"entries:updated\": render\n        }\n      }\n    ],\n    init: [\n      initialPayload ? JSON.parse(initialPayload) : false,\n      ...options.init || []\n    ]\n  });\n}\n\nfunction createDebouncedFn(callee, delayer) {\n  let ctxId = 0;\n  return () => {\n    const delayFnCtxId = ++ctxId;\n    delayer(() => {\n      if (ctxId === delayFnCtxId) {\n        callee();\n      }\n    });\n  };\n}\n\nexport { createDebouncedFn, createHead, renderDOMHead };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA,mBAA8B;;;ACM9B,eAAe,cAAc,MAAM,UAAU,CAAC,GAAG;AAC/C,QAAM,MAAM,QAAQ,YAAY,KAAK,gBAAgB;AACrD,MAAI,CAAC,OAAO,CAAC,KAAK;AAChB;AACF,QAAM,kBAAkB,EAAE,cAAc,MAAM,MAAM,CAAC,EAAE;AACvD,QAAM,KAAK,MAAM,SAAS,oBAAoB,eAAe;AAC7D,MAAI,CAAC,gBAAgB;AACnB;AACF,MAAI,KAAK,mBAAmB;AAC1B,WAAO,KAAK;AAAA,EACd;AACA,OAAK,oBAAoB,IAAI,QAAQ,OAAO,YAAY;AAjB1D;AAkBI,UAAM,iBAAiC,oBAAI,IAAI;AAC/C,UAAM,oBAAoB,IAAI,QAAQ,CAAC,aAAa;AAClD,WAAK,YAAY,EAAE,KAAK,CAAC,UAAU;AACjC;AAAA,UACE,MAAM,IAAI,CAAC,QAAQ;AACjB,kBAAM,QAAQ,eAAe,IAAI,IAAI,EAAE,KAAK;AAC5C,kBAAM,MAAM;AAAA,cACV;AAAA,cACA,KAAK,QAAQ,GAAG,IAAI,EAAE,IAAI,KAAK,KAAK,IAAI,OAAO,QAAQ,GAAG;AAAA,cAC1D,cAAc;AAAA,YAChB;AACA,gBAAI,IAAI,MAAM,mBAAmB,IAAI,EAAE,GAAG;AACxC,6BAAe,IAAI,IAAI,IAAI,QAAQ,CAAC;AAAA,YACtC;AACA,mBAAO;AAAA,UACT,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AACD,QAAI,QAAQ,KAAK;AACjB,QAAI,CAAC,OAAO;AACV,cAAQ;AAAA,QACN,OAAO,IAAI;AAAA,QACX,QAAwB,oBAAI,IAAI,GAAG,IAAI,aAAa,IAAI,eAAe,EAAE,IAAI,aAAa,IAAI,IAAI;AAAA,MACpG;AACA,iBAAW,OAAO,CAAC,QAAQ,MAAM,GAAG;AAClC,cAAM,YAAW,SAAI,GAAG,MAAP,mBAAU;AAC3B,mBAAW,KAAK,UAAU;AACxB,gBAAM,MAAM,EAAE,QAAQ,YAAY;AAClC,cAAI,CAAC,eAAe,IAAI,GAAG,GAAG;AAC5B;AAAA,UACF;AACA,gBAAM,OAAO,eAAe,EAAE,KAAK,OAAO,CAAC,EAAE,GAAG;AAAA,YAC9C,WAAW,EAAE;AAAA,YACb,GAAG,EAAE,kBAAkB,EAAE,OAAO,CAAC,OAAO,SAAS;AAC/C,oBAAM,IAAI,IAAI,EAAE,aAAa,IAAI;AACjC,qBAAO;AAAA,YACT,GAAG,CAAC,CAAC,KAAK,CAAC;AAAA,UACb,CAAC;AACD,eAAK,MAAM,EAAE,aAAa,UAAU,KAAK;AACzC,eAAK,KAAK,UAAU,IAAI,KAAK,QAAQ,IAAI;AACzC,cAAI,MAAM,MAAM,IAAI,KAAK,EAAE,GAAG;AAC5B,gBAAI,QAAQ;AACZ,gBAAI,IAAI,KAAK;AACb,mBAAO,MAAM,MAAM,IAAI,CAAC,GAAG;AACzB,kBAAI,GAAG,KAAK,EAAE,IAAI,OAAO;AAAA,YAC3B;AACA,kBAAM,MAAM,IAAI,GAAG,CAAC;AAAA,UACtB,OAAO;AACL,kBAAM,MAAM,IAAI,KAAK,IAAI,CAAC;AAAA,UAC5B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,qBAAqB,EAAE,GAAG,MAAM,YAAY;AAClD,UAAM,cAAc,CAAC;AACrB,aAAS,MAAM,IAAI,OAAO,IAAI;AAC5B,YAAM,IAAI,GAAG,EAAE,IAAI,KAAK;AACxB,YAAM,YAAY,CAAC,IAAI;AACvB,aAAO,MAAM,mBAAmB,CAAC;AAAA,IACnC;AACA,aAAS,SAAS,EAAE,IAAI,KAAK,IAAI,GAAG;AAClC,YAAM,YAAY,IAAI,IAAI,SAAS,OAAO;AAC1C,YAAM,MAAM,IAAI,IAAI,GAAG;AACvB,UAAI,CAAC,WAAW;AACd,YAAI,IAAI,eAAe,IAAI,gBAAgB,IAAI,aAAa;AAC1D,cAAI,cAAc,IAAI;AAAA,QACxB;AACA,YAAI,IAAI,aAAa,IAAI,cAAc,IAAI,WAAW;AACpD,cAAI,YAAY,IAAI;AAAA,QACtB;AACA,cAAM,IAAI,MAAM,MAAM;AACpB,qCAAK;AACL,gBAAM,MAAM,OAAO,EAAE;AAAA,QACvB,CAAC;AAAA,MACH;AACA,iBAAW,KAAK,IAAI,OAAO;AACzB,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,IAAI,OAAO,CAAC;AACpD;AACF,cAAM,QAAQ,IAAI,MAAM,CAAC;AACzB,YAAI,EAAE,WAAW,IAAI,KAAK,OAAO,UAAU,YAAY;AACrD,gBAAM,UAAU,2BAAK;AACrB,cAAI,WAAW,QAAQ,GAAG,CAAC,OAAO,GAAG;AACnC,kBAAM,KAAK,EAAE,MAAM,GAAG,EAAE;AACxB,kBAAM,KAAK,KAAK,IAAI,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC;AAAA,UAC5C;AACA,cAAI,IAAI,aAAa,QAAQ,CAAC,EAAE,MAAM,IAAI;AACxC,aAAC,IAAI,QAAQ,cAAc,IAAI,cAAc,KAAK;AAAA;AAAA,cAEhD,EAAE,UAAU,CAAC;AAAA,cACb,MAAM,KAAK,GAAG;AAAA,YAChB;AACA,gBAAI,aAAa,QAAQ,CAAC,IAAI,EAAE;AAAA,UAClC;AACA;AAAA,QACF;AACA,cAAM,KAAK,QAAQ,CAAC;AACpB,YAAI,MAAM,SAAS;AACjB,cAAI,CAAC,OAAO;AACV;AAAA,UACF;AACA,qBAAW,KAAK,OAAO;AACrB,yBAAa,MAAM,IAAI,GAAG,EAAE,IAAI,CAAC,IAAI,MAAM,IAAI,UAAU,OAAO,CAAC,CAAC;AAClE,aAAC,IAAI,UAAU,SAAS,CAAC,KAAK,IAAI,UAAU,IAAI,CAAC;AAAA,UACnD;AAAA,QACF,WAAW,MAAM,SAAS;AACxB,cAAI,CAAC,OAAO;AACV;AAAA,UACF;AACA,qBAAW,CAAC,IAAI,CAAC,KAAK,OAAO;AAC3B,kBAAM,IAAI,GAAG,EAAE,IAAI,EAAE,IAAI,MAAM;AAC7B,kBAAI,MAAM,eAAe,EAAE;AAAA,YAC7B,CAAC;AACD,gBAAI,MAAM,YAAY,IAAI,CAAC;AAAA,UAC7B;AAAA,QACF,WAAW,UAAU,SAAS,UAAU,MAAM;AAC5C,cAAI,aAAa,CAAC,MAAM,SAAS,IAAI,aAAa,GAAG,UAAU,OAAO,KAAK,OAAO,KAAK,CAAC;AACxF,uBAAa,MAAM,IAAI,IAAI,MAAM,IAAI,gBAAgB,CAAC,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AACA,UAAM,UAAU,CAAC;AACjB,UAAM,OAAO;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,MACV,MAAM;AAAA,IACR;AACA,UAAM,OAAO,MAAM;AACnB,eAAW,OAAO,MAAM;AACtB,YAAM,EAAE,KAAK,cAAc,GAAG,IAAI;AAClC,UAAI,CAAC;AACH;AACF,UAAI,IAAI,QAAQ,SAAS;AACvB,YAAI,QAAQ,IAAI;AAChB,cAAM,SAAS,IAAI,MAAM,IAAI,QAAQ,MAAM,KAAK;AAChD;AAAA,MACF;AACA,UAAI,MAAM,IAAI,OAAO,MAAM,MAAM,IAAI,EAAE;AACvC,UAAI,IAAI,KAAK;AACX,iBAAS,GAAG;AAAA,MACd,WAAW,eAAe,IAAI,IAAI,GAAG,GAAG;AACtC,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AACA,eAAW,OAAO,SAAS;AACzB,YAAM,MAAM,IAAI,IAAI,eAAe;AACnC,UAAI,MAAM,IAAI,cAAc,IAAI,IAAI,GAAG;AACvC,eAAS,GAAG;AACZ,WAAK,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,uBAAuB;AACpD,WAAK,GAAG,EAAE,YAAY,IAAI,GAAG;AAAA,IAC/B;AACA,eAAW,OAAO;AAChB,YAAM,KAAK,MAAM,SAAS,iBAAiB,KAAK,KAAK,KAAK;AAC5D,SAAK,QAAQ,IAAI,KAAK,YAAY,KAAK,IAAI;AAC3C,SAAK,YAAY,IAAI,KAAK,aAAa,KAAK,UAAU,IAAI,KAAK,UAAU;AACzE,SAAK,aAAa,IAAI,KAAK,YAAY,KAAK,SAAS;AACrD,eAAW,KAAK,MAAM,oBAAoB;AACxC,YAAM,mBAAmB,CAAC,EAAE;AAAA,IAC9B;AACA,SAAK,OAAO;AACZ,UAAM,KAAK,MAAM,SAAS,gBAAgB,EAAE,SAAS,KAAK,CAAC;AAC3D,YAAQ;AAAA,EACV,CAAC,EAAE,QAAQ,MAAM;AACf,SAAK,oBAAoB;AACzB,SAAK,QAAQ;AAAA,EACf,CAAC;AACD,SAAO,KAAK;AACd;AAEA,SAAS,WAAW,UAAU,CAAC,GAAG;AA3LlC;AA4LE,QAAM,WAAS,aAAQ,eAAR,mBAAoB,WAAU;AAC7C,UAAQ,WAAW,QAAQ,aAAa,OAAO,WAAW,cAAc,WAAW;AACnF,QAAM,mBAAiB,mBAAQ,aAAR,mBAAkB,KAAK,cAAc,mCAArC,mBAAqE,cAAa;AACzG,SAAO,aAAa;AAAA,IAClB,GAAG;AAAA,IACH,SAAS;AAAA,MACP,GAAG,QAAQ,WAAW,CAAC;AAAA,MACvB;AAAA,QACE,KAAK;AAAA,QACL,OAAO;AAAA,UACL,mBAAmB;AAAA,QACrB;AAAA,MACF;AAAA,IACF;AAAA,IACA,MAAM;AAAA,MACJ,iBAAiB,KAAK,MAAM,cAAc,IAAI;AAAA,MAC9C,GAAG,QAAQ,QAAQ,CAAC;AAAA,IACtB;AAAA,EACF,CAAC;AACH;AAEA,SAAS,kBAAkB,QAAQ,SAAS;AAC1C,MAAI,QAAQ;AACZ,SAAO,MAAM;AACX,UAAM,eAAe,EAAE;AACvB,YAAQ,MAAM;AACZ,UAAI,UAAU,cAAc;AAC1B,eAAO;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;ADtNA,SAASA,YAAW,UAAU,CAAC,GAAG;AAChC,QAAM,OAAO,WAAa;AAAA,IACxB,YAAY;AAAA,MACV,QAAQ,kBAAkB,MAAM,cAAc,IAAI,GAAG,CAAC,OAAO,WAAW,IAAI,CAAC,CAAC;AAAA,IAChF;AAAA,IACA,GAAG;AAAA,EACL,CAAC;AACD,SAAO;AACT;AACA,SAAS,eAAe,EAAE,UAAU,KAAK,GAAG;AAC1C,aAAO,4BAAc,cAAc,UAAU,EAAE,OAAO,QAAQA,YAAW,EAAE,GAAG,QAAQ;AACxF;",
  "names": ["createHead"]
}
